<template>
  <div>
     <el-card class="card01" style="z-index: 999" body-style="padding: 0">

        <div style="display:flex">
         <div style="display:flex" class="bigbox">
       <div   class="leftbox">
        <ul style="list-style-type:none;">
          <li style="margin:10px;font-size:12px">
            <span
            style="
              width: 10px;
              height: 10px;
              background-color: #73DB06;
              border-radius: 50%;
              -webkit-border-radius: 50%;
            "
            >&nbsp&nbsp&nbsp&nbsp</span
          >
            <span style="color:#ffff ">热带低压</span>
          </li>
          <li style="margin:10px;font-size:12px">
            <span
            style="
              width: 10px;
              height: 10px;
              background-color: #F8F562;
              border-radius: 50%;
              -webkit-border-radius: 50%;
            "
            >&nbsp&nbsp&nbsp&nbsp</span
          >
            <span style="color:#ffff">强热带风暴</span>
          </li>
          <li style="margin:10px;font-size:12px">
            <span
            style="
              width: 10px;
              height: 10px;
              background-color: #EA62F8;
              border-radius: 50%;
              -webkit-border-radius: 50%;
            "
            >&nbsp&nbsp&nbsp&nbsp</span
          >
            <span style="color:#ffff">强台风</span>
          </li>
        </ul>
       </div >


       <div  >
        <ul style="list-style-type:none">
          <li style="margin:10px;font-size:12px">
            <span
            style="
              width: 10px;
              height: 10px;
              background-color: #352FFF;
              border-radius: 50%;
              -webkit-border-radius: 50%;
            "
            >&nbsp&nbsp&nbsp&nbsp</span
          >
            <span style="color:#ffff">热带风暴</span>
          </li>
          <li style="margin:10px;font-size:12px">
            <span
            style="
              width: 10px;
              height: 10px;
              background-color: #FFB73D;
              border-radius: 50%;
              -webkit-border-radius: 50%;
            "
            >&nbsp&nbsp&nbsp&nbsp</span
          >
            <span style="color:#ffff">台风</span>
          </li>
          <li style="margin:10px;font-size:12px">
            <span
            style="
              width: 10px;
              height: 10px;
              background-color: #EB3E3F;
              border-radius: 50%;
              -webkit-border-radius: 50%;
            "
            >&nbsp&nbsp&nbsp&nbsp</span
          >
            <span style="color:#ffff">超强台风</span>
          </li>
        </ul>
       </div>
        </div>

         <div>
        <ul style="list-style-type:none">
          <li style="margin:5px;font-size:12px">
            <span style="color:#69A4FF">台</span>
          </li>
          <li  style="margin:5px;font-size:12px">
            <span style="color:#69A4FF">风</span>
          </li>
          <li  style="margin:5px;font-size:12px">
            <span style="color:#69A4FF">等</span>
          </li>
          <li  style="margin:5px;font-size:12px">
            <span style="color:#69A4FF">级</span>
          </li>
        </ul>
       </div>


        </div>
      </el-card>
    <el-card class="card02" style="z-index: 999" body-style="padding: 0">

        <div style="display:flex">

         <div style="display:flex" class="cardcolor">
       <div style="width:103px "  >
        <ul style="list-style-type:none;">
          <li style="margin:11px;font-size:12px">
            <span style=" border-bottom:2px dashed #CC5A5A;position: relative;bottom:10px;"
            >&nbsp&nbsp&nbsp</span
          >
            <span style="color:#ffff">九方预报</span>
          </li>
          <li style="margin:10px;font-size:12px">
            <span style=" border-bottom:2px dashed #DCDA8D ;position: relative;bottom:10px;"
            >&nbsp&nbsp&nbsp</span
          >
            <span style="color:#ffff">中国香港</span>
          </li>
          <li style="margin:10px;font-size:12px">
           <span style=" border-bottom:2px dashed #6CA2F5 ;position: relative;bottom:10px;"
            >&nbsp&nbsp&nbsp</span
          >
            <span style="color:#ffff"> EC</span>
          </li>
          <li style="margin:10px;font-size:12px">
           <span style=" border-bottom:2px dashed #FD89F6;position: relative;bottom:10px;"
            >&nbsp&nbsp&nbsp</span
          >
             <span style="color:#ffff">美国</span>
          </li>
        </ul>
       </div >


       <div  >
        <ul style="list-style-type:none">
          <li style="margin:11px;font-size:12px">
            <span style=" border-bottom:2px dashed #E8B256 ;position: relative;bottom:10px;"
            >&nbsp&nbsp&nbsp</span
          >
             <span style="color:#ffff">中国气象</span>
          </li>
          <li style="margin:10px;font-size:12px">
          <span style=" border-bottom:2px dashed #54D5B8 ;position: relative;bottom:10px;"
            >&nbsp&nbsp&nbsp</span
          >
            <span style="color:#ffff"> 日本</span>
          </li>
          <li style="margin:10px;font-size:12px">
           <span style=" border-bottom:2px dashed #6544D8 ;position: relative;bottom:10px;"
            >&nbsp&nbsp&nbsp</span
          >
             <span style="color:#ffff">GFS</span>
          </li>
           <li style="margin:10px;font-size:12px">
           <span style=" border-bottom:2px dashed #96C761 ;position: relative;bottom:10px;"
            >&nbsp&nbsp&nbsp</span
          >
            <span style="color:#ffff"> 韩国</span>
          </li>
        </ul>
       </div>
        </div>

         <div >
        <ul style="list-style-type:none">
          <li style="margin:5px;font-size:12px">
            <span style="color:#69A4FF">&nbsp</span>
          </li>
          <li style="margin:5px;font-size:12px">
            <span style="color:#69A4FF">预</span>
          </li>
          <li  style="margin:5px;font-size:12px">
           <span style="color:#69A4FF">报</span>
          </li>
          <li  style="margin:5px;font-size:12px">
            <span style="color:#69A4FF">台</span>
          </li>

        </ul>
       </div>

        </div>
      </el-card>

    <div class="" style="position: relative; height: 2000px; width: 420px">
      <el-button
        type="round"
        @click="dialog = true"
        style="position: absolute; top: 0; left: 83px; z-index: 2"
      ></el-button>
      <el-drawer
        :visible.sync="dialog"
        direction="ltr"
        custom-class="demo-drawer"
        ref="drawer"
        :modal-append-to-body="false"
        style="position: absolute; left: 80px"
        z-index="11"
        :modal="false"
        size="100%"
        :wrapperClosable="false"
      >
        <el-row style="padding: 10px">
          <el-col :md="8">
            <el-select
              v-model="value"
              placeholder="请选择"
              @change="valueChange"
            >
              <el-option
                v-for="item in options"
                :key="item.value"
                :label="item.label"
                :value="item.value"
              >
              </el-option>
            </el-select>
          </el-col>
          <el-col :md="15">
            <el-input
              placeholder="请输入内容"
              suffix-icon="el-icon-search"
              v-model="input2"
            >
            </el-input>
          </el-col>
        </el-row>
        <el-checkbox-group
          v-model="checkList"
          style="padding-left: 15px"
          @change="checkboxValueChange"
        >
          <div>
            <el-checkbox
              v-for="checkItem in checkItems"
              :key="checkItem"
              :label="checkItem.name"
              style="width: 100%"
            >
              <!-- <div style="">
              <div style="display: inline-block">[2004]黑格比</div>
              <i
                class="el-icon-share"
                style="
                  float: right;
                  font-size: 20px;
                  color: #37a0ba;
                  padding-left: 2px;
                "
              ></i>
              <i
                class="el-icon-caret-right"
                style="
                  float: right;
                  font-size: 20px;
                  color: #37a0ba;
                  padding-left: 2px;
                "
              ></i>
              <div
                style="
                  display: inline-block;
                  float: right;
                  color: #37a0ba;
                  padding-left: 2px;
                "
              >
                相似
              </div>
            </div> -->
            </el-checkbox>
          </div>
        </el-checkbox-group>

        <el-divider></el-divider>

        <div class="tableTitle" style="color: #4d90aa">
          {{ selectTyphoon }}
        </div>
        <el-table
          :data="tableData"
          :show-overflow-tooltip="true"
          :header-cell-style="{ background: '#ebf0ed', color: '#4D90AA' }"
          style="width: 100%"
          :header-row-style="{ text_align: 'center' }"
        >
          <el-table-column prop="time" label="时间" width="100" align="center">
          </el-table-column>
          <el-table-column prop="speed" label="风速" width="80" align="center">
          </el-table-column>
          <el-table-column
            prop="direction"
            label="移向"
            width="80"
            align="center"
          >
          </el-table-column>
          <el-table-column prop="power" label="强度" align="center">
          </el-table-column>
        </el-table>
      </el-drawer>
    </div>
    <Typhoon
      :typhoonData="originTyphoonData"
      :typhoonForecastData="originTyphoonForecastData"
      ref="typhoon"
    />

    <div>
      <el-card
        style="position: absolute; top: 24px; right: 24px"
        :body-style="{ padding: '4px' }"
      >
        <div
          style="
            width:36px;
            height: 108px;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            padding: 0 4px;
            font-size: 22px;
          "
        >

          <i class="el-icon-zoom-in" circle @click="zoomIn"></i>
          <i class="el-icon-zoom-out" circle @click="zoomOut"></i>
          <i class="el-icon-full-screen" circle @click="zoomReset"></i>

        </div>
      </el-card>


      <el-card
        style="position: absolute; top: 150px; right: 24px"
        :body-style="{ padding: '4px' }"
        >
        <div
         style="
            width:36px;
            height: 108px;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            padding: 0 4px;
            font-size: 22px;
          ">
          <i class="el-icon-zoom-in" circle @click="zoomIn"></i>
          <i class="el-icon-search" circle @click="zoomReset"></i>
          <i class="el-icon-discover" circle @click="positioning"></i>
        </div>
      </el-card>
    </div>
  </div>
</template>

<script>
import Typhoon from "@/components/typhoon/index";
export default {
  name: "",
  components: {
    Typhoon,
  },
  data() {
    return {
      isRuler: false,
      table: false,
      dialog: false,
      loading: false,
      options: [],
      originTyphoonData: [],
      testTyphoonData: [
        {
          name: "HATO天鸽",
          no: "15W",
          year: "2017",
          data: [
            {
              date: "20170820",
              time: "1200",
              position: [126.6, 21.1],
              direction: 295,
              speed: 5.2,
              MinAPinCenter: 1004,
              maxSpeed: 18,
            },
            {
              date: "20170820",
              time: "1800",
              position: [124.6, 19.9],
              direction: 280,
              speed: 6.7,
              MinAPinCenter: 1004,
              maxSpeed: 18,
            },
            {
              date: "20170821",
              time: "0000",
              position: [125.0, 20.0],
              direction: 285,
              speed: 4.7,
              MinAPinCenter: 1004,
              maxSpeed: 18,
            },
            {
              date: "20170821",
              time: "0600",
              position: [123.9, 20.4],
              direction: 290,
              speed: 4.2,
              MinAPinCenter: 1004,
              maxSpeed: 18,
            },
            {
              date: "20170821",
              time: "1200",
              position: [123.0, 20.7],
              direction: 290,
              speed: 4.7,
              MinAPinCenter: 990,
              maxSpeed: 18,
            },
            {
              date: "20170821",
              time: "1800",
              position: [121.5, 20.3],
              direction: 275,
              speed: 5.7,
              MinAPinCenter: 992,
              maxSpeed: 23,
            },
            {
              date: "20170822",
              time: "0000",
              position: [120.0, 20.4],
              direction: 270,
              speed: 6.2,
              MinAPinCenter: 992,
              maxSpeed: 23,
            },
            {
              date: "20170822",
              time: "0600",
              position: [118.7, 20.4],
              direction: 275,
              speed: 6.2,
              MinAPinCenter: 981,
              maxSpeed: 31,
            },
            {
              date: "20170822",
              time: "1200",
              position: [117.3, 20.7],
              direction: 280,
              speed: 6.7,
              MinAPinCenter: 978,
              maxSpeed: 33,
            },
            {
              date: "20170822",
              time: "1800",
              position: [116.1, 21.1],
              direction: 285,
              speed: 6.2,
              MinAPinCenter: 976,
              maxSpeed: 33,
            },
            {
              date: "20170823",
              time: "0000",
              position: [114.6, 21.5],
              direction: 285,
              speed: 6.7,
              MinAPinCenter: 963,
              maxSpeed: 43,
            },
            {
              date: "20170823",
              time: "0600",
              position: [112.9, 22.2],
              direction: 290,
              speed: 7.7,
              MinAPinCenter: 964,
              maxSpeed: 43,
            },
          ],
        },
      ],
      originTyphoonForecastData: [],
      testTyphoonForecastData: [
        {
          name: "HATO天鸽",
          no: "15W",
          year: "2017",
          time: "2017082012",
          data: [
            {
              timeDistance: "00000",
              position: [126.7, 20.7],
              MinAPinCenter: 982,
              maxSpeed: 43,
            },
            {
              timeDistance: "00600",
              position: [124.9, 21.1],
              MinAPinCenter: 994,
              maxSpeed: 37,
            },
            {
              timeDistance: "01200",
              position: [123.4, 21.0],
              MinAPinCenter: 994,
              maxSpeed: 38,
            },
            {
              timeDistance: "01800",
              position: [122.5, 20.6],
              MinAPinCenter: 990,
              maxSpeed: 47,
            },
            {
              timeDistance: "02400",
              position: [121.4, 20.3],
              MinAPinCenter: 986,
              maxSpeed: 58,
            },
            {
              timeDistance: "03000",
              position: [120.8, 20.1],
              MinAPinCenter: 982,
              maxSpeed: 43,
            },
            {
              timeDistance: "03600",
              position: [119.9, 20.3],
              MinAPinCenter: 981,
              maxSpeed: 54,
            },
            {
              timeDistance: "04200",
              position: [118.9, 20.7],
              MinAPinCenter: 983,
              maxSpeed: 52,
            },
            {
              timeDistance: "04800",
              position: [117.5, 20.9],
              MinAPinCenter: 983,
              maxSpeed: 58,
            },
            {
              timeDistance: "05400",
              position: [116.2, 21.2],
              MinAPinCenter: 975,
              maxSpeed: 63,
            },
            {
              timeDistance: "06000",
              position: [114.9, 21.6],
              MinAPinCenter: 965,
              maxSpeed: 80,
            },
            {
              timeDistance: "06600",
              position: [113.4, 21.9],
              MinAPinCenter: 956,
              maxSpeed: 84,
            },
            {
              timeDistance: "07200",
              position: [111.1, 22.3],
              MinAPinCenter: 975,
              maxSpeed: 56,
            },
            {
              timeDistance: "07800",
              position: [110.6, 22.9],
              MinAPinCenter: 982,
              maxSpeed: 43,
            },
            {
              timeDistance: "08400",
              position: [109.3, 23.1],
              MinAPinCenter: 988,
              maxSpeed: 39,
            },
            {
              timeDistance: "09000",
              position: [108.0, 23.0],
              MinAPinCenter: 991,
              maxSpeed: 34,
            },
            {
              timeDistance: "09600",
              position: [107.0, 23.0],
              MinAPinCenter: 994,
              maxSpeed: 31,
            },
            {
              timeDistance: "10200",
              position: [105.9, 23.0],
              MinAPinCenter: 994,
              maxSpeed: 30,
            },
            {
              timeDistance: "10800",
              position: [104.6, 23.0],
              MinAPinCenter: 999,
              maxSpeed: 30,
            },
            {
              timeDistance: "11400",
              position: [103.3, 23.3],
              MinAPinCenter: 1003,
              maxSpeed: 32,
            },
            {
              timeDistance: "12000",
              position: [102.1, 23.3],
              MinAPinCenter: 1004,
              maxSpeed: 25,
            },
            {
              timeDistance: "12600",
              position: [101.0, 23.0],
              MinAPinCenter: 1004,
              maxSpeed: 25,
            },
          ],
        },
      ],
      checkItems: [{ name: "HATO天鸽", year: 2017 }],
      checkList: [],
      checkListSimial: [],
      tableData: [],
      value: "",
      input2: "",
      selectTyphoon: "",
    };
  },
  computed: {},
  watch: {},
  created() {},
  mounted() {
    for (const currentValue of this.originTyphoonData) {
      this.options.push({ value: currentValue.year, label: currentValue.year });
    }

    var hash = {};
    this.options = this.options.reduce(function (item, next) {
      hash[next.name] ? "" : (hash[next.name] = true && item.push(next));
      return item;
    }, []);
  },
  methods: {
    valueChange() {
      for (const i of this.originTyphoonData) {
        this.tableData = [];
        if (i.year == this.value) {
          this.checkItems.push({
            name: i.name,
            year: i.year,
          });
        }
      }
    },
    checkboxValueChange() {
      if (this.checkList.length != 0) {
        let last = this.checkList[this.checkList.length - 1];
        this.selectTyphoon = last + "路径图";

        this.testTyphoonData.forEach((currentValue) => {
          currentValue.name == last;
          currentValue.data.forEach((item) => {
            this.tableData.push({
              time:
                item.date.slice(4) +
                "-" +
                item.time.slice(0, 2) +
                ":" +
                item.time.slice(2),
              speed: item.speed + "m/s",
              direction: item.direction,
              power:
                item.speed >= 51
                  ? "超强台风"
                  : item.speed >= 50.9
                  ? "强台风"
                  : item.speed >= 41.4
                  ? "台风"
                  : item.speed >= 32.6
                  ? "强热带风暴"
                  : item.speed >= 24.4
                  ? "热带风暴"
                  : "热带气压",
            });
          });
        });
      } else {
        this.selectTyphoon = "";
        this.tableData = [];
      }

      this.originTyphoonData = [];
      this.originTyphoonForecastData = [];

      this.testTyphoonData.forEach((element) => {
        if (element.name == this.checkList[this.checkList.length - 1]) {
          this.originTyphoonData.push(element);
        }
      });
      this.testTyphoonForecastData.forEach((element) => {
        if (element.name == this.checkList[this.checkList.length - 1]) {
          this.originTyphoonForecastData.push(element);
        }
      });
    },

    zoomReset() {
      this.$refs.typhoon.zoomReset();
    },
    zoomIn() {
      this.$refs.typhoon.zoomIn();
    },
    zoomOut() {
      this.$refs.typhoon.zoomOut();
    },
    rulerOn() {
      this.isRuler = !this.isRuler;
      this.$refs.typhoon.rulerOn();
    },
    rulerOff() {
      this.isRuler = !this.isRuler;
      this.$refs.typhoon.rulerOff();
    },
    positioning() {
      this.$refs.typhoon.positioning();
    },
  },
};
</script>

<style lang="scss" scoped>
.tableTitle {
  font-size: 15px;
  color: aliceblue;
  padding-left: 20px;
  padding-bottom: 10px;
}
/deep/ span.el-checkbox__label {
  display: inline-block;
  width: 80%;
}
.demo-drawer {
  width: 20%;
}
.el-checkbox {
  padding: 10px;
}
.el-checkbox-group div :hover {
  background-color: #e6eced;
}
/deep/ .el-drawer__header {
  margin-bottom: 0;
}
/deep/ .el-divider--horizontal {
  margin-bottom: 10px;
}
/deep/ .card01 {
  background-color:#1A2638;
  position: absolute;
  width: 212px;
  height: 84px;
  top: 684px;
  right: 12px;
  border: none;
  border-bottom:1px solid #ffff ;

}
/deep/ .card02{
  background-color:#1A2638;
  position: absolute;
  width: 212px;
  height: 108px;
  top: 770px;
  right: 12px;
  border: none;
}
/deep/ .bigbox{
  background-color:rgba(0, 0, 0, 0.25);
  width: 192px;
}
/deep/ .cardcolor{
  background-color:rgba(0, 0, 0, 0.25);
  // width: 280px;
}

/deep/ .leftbox{
  width: 102px;
}

i {
  cursor: pointer;
}
</style>
